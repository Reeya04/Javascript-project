<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-do List</title>
    <link rel="stylesheet" href="stylesjs.css/15-todolist.css">
</head>
<body>
    <div class="container">
        <div class="control-todo">
            <input id="todoInput" type="text" placeholder="to-do....">
            <input id="dueDate" type="date">
            <button class="add-todo-btn" id="js-add-todo-btn">Add to-do</button>
        </div>
        <div class="display-todo-list" id="todolist-output"></div>
    </div>
    

    <script>
        const todoInput = document.getElementById('todoInput');
        const dueDateInput = document.getElementById('dueDate');
        const addTodoBtn = document.getElementById('js-add-todo-btn');
        const outputDiv = document.getElementById('todolist-output')

        const todoList = JSON.parse(localStorage.getItem('todoList')) ||
        [
            {
                todo: "Make dinner",
                dueDate: "7/12/2024"
            },
            {
                todo: "Watch youtube",
                dueDate: "4/10/2025"
            },
            {
                todo: "Wash dishes",
                dueDate: "6/10/2024"
            },
        ];

        //Defining the add todo function
        function addTodo () {
            const todo = todoInput.value;
            const dueDate = dueDateInput.value;
            todoList.push({
                todo,
                dueDate
            })
            localStorage.setItem('todoList', JSON.stringify(todoList))
        }
        //Handling the add todo button
        addTodoBtn.addEventListener('click', () => {
            addTodo();
            displayTodo();
        })
        function displayTodo () {
            let todoListHTML = ''; //Accumulator variable
            //Looping through the todoList array
            todoList.forEach((todo, index) => {
               const toDo = todo.todo;
               const duedate = todo.dueDate;
               //Generating HTML for each todo in the array.
                todoListHTML += `
                <div class="list-container">
                    <p>
                        ${toDo}
                    </p>
                    <p>
                        ${duedate}
                    </p>
                    <button class="delete-btn" onclick="
                        todoList.splice(${index}, 1);
                        localStorage.setItem('todoList', JSON.stringify(todoList))
                        displayTodo();
                        alert('One item deleted from the todo list')
                    ">
                        Delete
                    </button>
                </div>
                `
            })
            outputDiv.innerHTML = todoListHTML;
        }
        displayTodo();
    </script>
        <a href="2-variables.html">Learn abour variables</a>
        <a href="3-calculator.html">Use my online calculator</a>
        <a href="4-booleans.html">Leran Booleans</a>
        <a href="5-rock-paper-scissors-games.html">Playiny a game</a>
        <a href="6-functions.html">Learning baout functions</a>
        <a href="7-objects.html">Learning Js objects</a>
        <a href="8-dom.html">Document Object Model</a>
        <a href="9-loops.html">Learning baout loops</a>
        <a href="10-settimeout.html">Learning the setTimeout async function</a>
        <a href="11-setinterval.html">The setInterval Function</a>
        <a href="12-typingeffect-example.html">Gpt typing effect example</a>
        <a href="13-events.html">Learning events</a>
        <a href="14-arrays.html">Learning arrays</a>
        <a href="index.html">Go to homepage</a>
        <a href="16-oop.html">OOP</a>
        <a href="17-inheritance.html">17-inheritance</a>
</body>
</html>